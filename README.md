# Backend для работы с интервью и бизнес-требованиями

## Описание проекта
Данный проект представляет собой backend-приложение для работы с интервью и бизнес-требованиями. Он предоставляет API для управления пользователями, проектами, требованиями и сессиями. Приложение построено с использованием современных технологий и обеспечивает высокую производительность и масштабируемость.

## Стек технологий

- **Python 3.13**: Основной язык программирования.
- **FastAPI**: Фреймворк для создания веб-приложений.
- **SQLAlchemy**: ORM для работы с базой данных.
- **Alembic**: Инструмент для управления миграциями базы данных.
- **PostgreSQL**: Реляционная база данных.
- **Docker / Docker Compose**: Контейнеризация приложения.
- **pydantic**: Валидация данных и конфигурация.
- **Uvicorn**: ASGI-сервер для запуска приложения.
- **HTTPX / Websockets**: Для работы с HTTP и WebSocket.
- **WeasyPrint / python-docx / markdown**: Для работы с документами.

## Структура проекта

```plaintext
.
├── app/
│   ├── api/                 # Роутеры для обработки запросов
│   ├── core/                # Конфигурации и настройки
│   ├── cruds/               # CRUD-операции для работы с базой данных
│   ├── dependencies/        # Зависимости для роутеров
│   ├── exceptions/          # Обработка ошибок
│   ├── models/              # ORM-модели
│   ├── schemas/             # Схемы данных (Pydantic)
│   ├── services/            # Логика приложения
│   ├── utils/               # Утилиты и вспомогательные функции
│   └── main.py              # Точка входа в приложение
├── alembic/                 # Миграции базы данных
├── upload/                  # Хранилище загруженных файлов
├── Dockerfile               # Описание Docker-образа
├── docker-compose.yml       # Конфигурация для Docker Compose
├── pyproject.toml           # Зависимости и настройки проекта
└── README.md                # Документация проекта
```

## Установка и запуск

### 1. Клонирование репозитория
```bash
git clone <URL-репозитория>
cd RTF_TEAM
```

### 2. Установка зависимостей
Используется пакетный менеджер `uv`:
```bash
uv sync
```

### 3. Настройка переменных окружения
Создайте файл `.env` на основе `.env.example` и, при необходимости, актуализируйте необходимые переменные:
```env
POSTGRES_PASSWORD=your_password
POSTGRES_USER=your_username
POSTGRES_DB=your_database
```

### 4. Применение миграций базы данных
```bash
alembic upgrade head
```

### 5. Запуск приложения
#### Локально:
```bash
uv run api_start.py
```
#### Через Docker:
```bash
docker-compose up -d
```
Приложение будет доступно по адресу: [http://localhost:8080/docs](http://localhost:8080/docs)

## Основные команды

### Установка зависимостей
```bash
uv add requests
```

### Создание и применение миграций
```bash
alembic revision --autogenerate -m "Описание миграции"
alembic upgrade head
```

## Решение возможных проблем

### Проблема: Занят порт 8080
#### Решение:
1. Найдите процесс, занимающий порт 8080:

    ##### Linux / macOS
   ```bash
   lsof -i :8080
   ```

    ##### Windows (PowerShell)
   ```bash
   netstat -ano | findstr :8080
   ```

2. Завершите процесс:

    ##### Linux / macOS
   ```bash
   kill -9 <PID>
   ```

    ##### Windows (PowerShell)
   ```bash
   taskkill /PID <PID> /F
   ```

3. Перезапустите приложение.

### Проблема: Ошибка подключения к базе данных
#### Решение:
1. Проверьте, что контейнер с PostgreSQL запущен:
   ```bash
   docker ps
   ```
2. Перезапустите контейнер:
   ```bash
   docker-compose restart postgres
   ```
3. Убедитесь, что переменные окружения в `.env` указаны корректно.

### Проблема: Зависание при установке зависимостей
#### Решение:
1. Очистите кэш пакетного менеджера:
   ```bash
   uv cache clear
   ```
2. Повторите установку:
   ```bash
   uv sync
   ```
